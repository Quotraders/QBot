<Project>
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <LangVersion>latest</LangVersion>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    
    <!-- PRODUCTION HARDENING: ZERO TOLERANCE FOR NON-PRODUCTION CODE -->
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <WarningsAsErrors>CS0162;CS0168;CS0219;CS0414;CS0649;CS0693;CS1717</WarningsAsErrors>
    
    <!-- Enable nullable reference types solution-wide -->
    <Nullable>enable</Nullable>
    
    <!-- Enable static code analysis with production-ready enforcement -->
    <EnableNETAnalyzers>true</EnableNETAnalyzers>
    <AnalysisLevel>latest</AnalysisLevel>
    <CodeAnalysisTreatWarningsAsErrors>true</CodeAnalysisTreatWarningsAsErrors>
    
    <!-- Security and reliability analyzers -->
    <RunAnalyzersDuringBuild>true</RunAnalyzersDuringBuild>
    <RunCodeAnalysis>true</RunCodeAnalysis>
    
    <!-- PRODUCTION ENFORCEMENT: Block build for any non-production patterns -->
    <WarningsNotAsErrors />
    <!-- Convert ALL SonarAnalyzer rules to errors for production compliance -->
    <WarningsAsErrors>$(WarningsAsErrors);S101;S103;S104;S105;S106;S107;S108;S109;S110;S112;S113;S114;S115;S116;S117;S118;S119;S120;S121;S122;S123;S124;S125;S126;S127;S128;S131;S134;S138;S139;S1066;S1067;S1068;S1075;S1104;S1116;S1117;S1118;S1121;S1123;S1124;S1125;S1128;S1131;S1134;S1135;S1144;S1145;S1147;S1151;S1155;S1163;S1168;S1172;S1176;S1181;S1186;S1192;S1199;S1206;S1210;S1215;S1244;S1301;S1449;S1451;S1479;S1481;S1541;S1607;S1643;S1656;S1659;S1694;S1696;S1697;S1698;S1699;S1751;S1764;S1848;S1854;S1858;S1862;S1871;S1905;S1939;S1940;S1944;S2053;S2077;S2092;S2114;S2123;S2139;S2156;S2178;S2183;S2184;S2187;S2190;S2197;S2201;S2219;S2223;S2225;S2228;S2234;S2259;S2275;S2278;S2292;S2325;S2326;S2327;S2328;S2333;S2339;S2342;S2344;S2345;S2346;S2357;S2360;S2365;S2368;S2372;S2376;S2387;S2479;S2486;S2551;S2583;S2589;S2681;S2692;S2696;S2701;S2757;S2758;S2760;S2583;S2589;S2681;S2692;S2696;S2701;S2757;S2758;S2760;S2933;S2934;S2953;S2955;S2971;S2995;S3005;S3052;S3169;S3172;S3240;S3244;S3246;S3247;S3249;S3251;S3253;S3254;S3256;S3257;S3260;S3263;S3264;S3265;S3267;S3343;S3358;S3366;S3376;S3397;S3400;S3415;S3427;S3433;S3440;S3442;S3443;S3444;S3445;S3449;S3451;S3456;S3457;S3458;S3459;S3464;S3466;S3472;S3776;S3881;S3884;S3885;S3887;S3889;S3896;S3897;S3898;S3900;S3902;S3903;S3904;S3906;S3908;S3909;S3923;S3925;S3926;S3927;S3928;S3937;S3949;S3956;S3962;S3963;S3966;S3967;S3971;S3972;S3973;S3981;S3984;S3990;S3992;S3993;S3994;S3995;S3996;S3997;S4000;S4002;S4004;S4005;S4015;S4017;S4018;S4019;S4025;S4026;S4027;S4035;S4036;S4040;S4041;S4047;S4049;S4050;S4052;S4056;S4057;S4058;S4060;S4061;S4136;S4142;S4143;S4144;S4201;S4220;S4487;S4502;S4524;S4564;S4581;S4583;S4586;S4635;S6580;S6602;S6605;S6608;S6612;S6613;S6615;S6618;S6619;S6620;S6621;S6622;S6667;S6668;AsyncFixer01;AsyncFixer02;AsyncFixer03;AsyncFixer04;AsyncFixer05;SCS0005;SCS0006;SCS0009;SCS0014;SCS0015;SCS0016;SCS0017;SCS0018;SCS0019;SCS0020;SCS0021;SCS0022;SCS0023;SCS0024;SCS0026;SCS0027;SCS0028;SCS0029;SCS0030;SCS0031;SCS0032;SCS0033;SCS0034;SCS0035;SCS0036;CA1000;CA1001;CA1002;CA1003;CA1005;CA1008;CA1010;CA1012;CA1014;CA1016;CA1017;CA1018;CA1019;CA1021;CA1024;CA1027;CA1028;CA1030;CA1031;CA1032;CA1033;CA1034;CA1036;CA1040;CA1041;CA1043;CA1044;CA1045;CA1046;CA1047;CA1050;CA1051;CA1052;CA1054;CA1055;CA1056;CA1058;CA1060;CA1061;CA1062;CA1063;CA1064;CA1065;CA1066;CA1067;CA1068;CA1069;CA1070;CA1200;CA1300;CA1301;CA1302;CA1303;CA1304;CA1305;CA1307;CA1308;CA1309;CA1310;CA1311;CA1401;CA1416;CA1417;CA1418;CA1419;CA1420;CA1421;CA1422;CA1501;CA1502;CA1505;CA1506;CA1507;CA1508;CA1509;CA1510;CA1511;CA1512;CA1513;CA1514;CA1515;CA1700;CA1707;CA1708;CA1710;CA1711;CA1712;CA1713;CA1714;CA1715;CA1716;CA1717;CA1720;CA1721;CA1724;CA1725;CA1727;CA1801;CA1802;CA1805;CA1806;CA1810;CA1812;CA1813;CA1814;CA1815;CA1816;CA1819;CA1820;CA1821;CA1822;CA1823;CA1824;CA1825;CA1826;CA1827;CA1828;CA1829;CA1830;CA1831;CA1832;CA1833;CA1834;CA1835;CA1836;CA1837;CA1838;CA1839;CA1840;CA1841;CA1842;CA1843;CA1844;CA1845;CA1846;CA1847;CA1848;CA1849;CA1850;CA2000;CA2002;CA2007;CA2008;CA2009;CA2011;CA2012;CA2013;CA2014;CA2015;CA2016;CA2017;CA2018;CA2019;CA2020;CA2021;CA2100;CA2101;CA2109;CA2119;CA2153;CA2200;CA2201;CA2207;CA2208;CA2211;CA2213;CA2214;CA2215;CA2216;CA2217;CA2218;CA2219;CA2224;CA2225;CA2226;CA2227;CA2229;CA2231;CA2234;CA2235;CA2237;CA2241;CA2242;CA2243;CA2244;CA2245;CA2246;CA2247;CA2248;CA2249;CA2250;CA2251;CA2252;CA2253;CA2254;CA2255;CA2256;CA2257;CA2258;CA2259;CA2260;CA2261;CA2300;CA2301;CA2302;CA2305;CA2310;CA2311;CA2312;CA2321;CA2322;CA2326;CA2327;CA2328;CA2329;CA2330;CA2350;CA2351;CA2352;CA2353;CA2354;CA2355;CA2356;CA2361;CA2362;CA3001;CA3002;CA3003;CA3004;CA3005;CA3006;CA3007;CA3008;CA3009;CA3010;CA3011;CA3012;CA3061;CA3075;CA3076;CA3077;CA3147;CA5350;CA5351;CA5359;CA5360;CA5361;CA5362;CA5363;CA5364;CA5365;CA5366;CA5367;CA5368;CA5369;CA5370;CA5371;CA5372;CA5373;CA5374;CA5375;CA5376;CA5377;CA5378;CA5379;CA5380;CA5381;CA5382;CA5383;CA5384;CA5385;CA5386;CA5387;CA5388;CA5389;CA5390;CA5391;CA5392;CA5393;CA5394;CA5395;CA5396;CA5397;CA5398;CA5399;CA5400;CA5401;CA5402;CA5403</WarningsAsErrors>
  </PropertyGroup>

  <ItemGroup>
    <!-- Microsoft Code Analysis analyzers -->
    <PackageReference Include="Microsoft.CodeAnalysis.Analyzers" Version="3.3.4" PrivateAssets="all" />
    <PackageReference Include="Microsoft.CodeAnalysis.NetAnalyzers" Version="8.0.0" PrivateAssets="all" />
    
    <!-- Security analyzers -->
    <PackageReference Include="Microsoft.CodeAnalysis.BannedApiAnalyzers" Version="3.3.4" PrivateAssets="all" />
    <PackageReference Include="SecurityCodeScan.VS2019" Version="5.6.7" PrivateAssets="all" />
    
    <!-- Additional quality analyzers -->
    <PackageReference Include="AsyncFixer" Version="1.6.0" PrivateAssets="all" />
    <PackageReference Include="SonarAnalyzer.CSharp" Version="9.32.0.97167" PrivateAssets="all" />
  </ItemGroup>

  <!-- PRODUCTION ENFORCEMENT: Custom target to scan for non-production patterns -->
  <Target Name="ProductionReadinessCheck" BeforeTargets="Build">
    <ItemGroup>
      <SourceFiles Include="**/*.cs" Exclude="bin/**;obj/**;packages/**" />
    </ItemGroup>
    
    <Exec Command="powershell -Command &quot;$files = Get-ChildItem -Path '$(MSBuildProjectDirectory)' -Recurse -Include '*.cs' | Where-Object { $_.FullName -notmatch '\\(bin|obj|packages)\\' }; $found = $false; foreach($file in $files) { $content = Get-Content $file.FullName -Raw; if($content -match '(?i)(TODO|FIXME|HACK|STUB|PLACEHOLDER|\s+//[^/].*(?:not implemented|temporary|quick fix|workaround))') { Write-Host 'PRODUCTION VIOLATION in' $file.FullName; $found = $true } }; if($found) { Write-Host 'BUILD FAILED: Non-production code patterns detected. All TODO/FIXME/HACK/STUB/PLACEHOLDER patterns must be removed before building.'; exit 1 }&quot;"
          ContinueOnError="false"
          IgnoreExitCode="false" 
          Condition="'$(Configuration)' == 'Release' OR '$(PRODUCTION_ENFORCEMENT)' == 'true'" />
  </Target>

</Project>
