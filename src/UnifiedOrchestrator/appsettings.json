{
  "Sessions": {
    "TimeZone": "America/New_York",
    "MaintenanceBreak": { "Start": "17:00", "End": "18:00" },
    "RTH": { "Start": "09:30", "End": "16:00" },
    "ETH": { "Allow": true, "CurbFirstMins": 3 },
    "SundayReopen": { "Enable": true, "CurbMins": 5 }
  },
  "NeutralBand": {
    "BearishThreshold": 0.45,
    "BullishThreshold": 0.55,
    "EnableHysteresis": true,
    "HysteresisBuffer": 0.02
  },
  "WorkflowScheduling": {
    "enabled": true,
    "timeZone": "America/New_York",
    "defaultSchedules": {
      "futures_default": {
        "SessionOpen": "0 0 18 ? * SUN",
        "SessionClose": "0 0 17 ? * FRI",
        "DailyBreakStart": "0 0 17 ? * MON-THU",
        "DailyBreakEnd": "0 0 18 ? * MON-THU"
      },
      "es_nq_critical_trading": {
        "SessionOpen": "0 0 18 ? * SUN",
        "SessionClose": "0 0 17 ? * FRI",
        "DailyBreakStart": "0 0 17 ? * MON-THU",
        "DailyBreakEnd": "0 0 18 ? * MON-THU",
        "MarketHours": "*/15 * 18-23,0-16 * * SUN-FRI",
        "Overnight": "*/30 * 18-23,0-8 * * SUN-FRI"
      },
      "portfolio_heat": {
        "SessionOpen": "0 0 18 ? * SUN",
        "SessionClose": "0 0 17 ? * FRI",
        "DailyBreakStart": "0 0 17 ? * MON-THU",
        "DailyBreakEnd": "0 0 18 ? * MON-THU",
        "Regular": "*/30 * 18-23,0-16 * * SUN-FRI",
        "MarketHours": "*/10 * 18-23,0-16 * * SUN-FRI"
      },
      "ultimate_ml_rl_intel_system": {
        "SessionOpen": "0 0 18 ? * SUN",
        "SessionClose": "0 0 17 ? * FRI",
        "DailyBreakStart": "0 0 17 ? * MON-THU",
        "DailyBreakEnd": "0 0 18 ? * MON-THU",
        "Global": "0 */6 * * * *",
        "MarketHours": "*/20 * 18-23,0-16 * * SUN-FRI"
      }
    },
    "marketHolidays": [
      "2024-01-01", "2024-01-15", "2024-02-19", "2024-03-29", 
      "2024-05-27", "2024-06-19", "2024-07-04", "2024-09-02", 
      "2024-10-14", "2024-11-28", "2024-12-25",
      "2025-01-01", "2025-01-20", "2025-02-17", "2025-04-18",
      "2025-05-26", "2025-06-19", "2025-07-04", "2025-09-01",
      "2025-10-13", "2025-11-27", "2025-12-25",
      "2026-01-01", "2026-01-19", "2026-02-16", "2026-04-03",
      "2026-05-25", "2026-06-19", "2026-07-03", "2026-09-07",
      "2026-10-12", "2026-11-26", "2026-12-25"
    ]
  },
  "PythonIntegration": {
    "enabled": true,
    "pythonPath": "/usr/bin/python3",
    "workingDirectory": "./python",
    "scriptPaths": {
      "decisionService": "decision_service/simple_decision_service.py",
      "modelInference": "ucb/neural_ucb_topstep.py"
    },
    "timeout": 30
  },
  "ModelLoading": {
    "enabled": true,
    "onnxEnabled": true,
    "modelsDirectory": "/home/runner/work/trading-bot-c-/trading-bot-c-/models",
    "fallbackMode": "simulation",
    "modelPaths": {
      "confidenceModel": "/home/runner/work/trading-bot-c-/trading-bot-c-/models/confidence_model.onnx",
      "rlModel": "/home/runner/work/trading-bot-c-/trading-bot-c-/models/rl_model.onnx",
      "cvarPpoAgent": "/home/runner/work/trading-bot-c-/trading-bot-c-/models/rl/cvar_ppo_agent.onnx"
    },
    "healthCheckInterval": 300
  },
  "IntelligenceStack": {
    "ml": {
      "confidence": {
        "enabled": true,
        "minConfidence": 0.52,
        "neutralConfidenceMin": 0.45,
        "neutralConfidenceMax": 0.50,
        "kellyClip": 0.35,
        "edgeConversionOffset": 0.5,
        "edgeConversionMultiplier": 2.0,
        "confidenceMultiplierOffset": 0.5,
        "confidenceMultiplierScale": 4.0
      },
      "ensemble": {
        "metaPerRegime": {
          "enabled": true,
          "transitionBlendSeconds": 60
        }
      },
      "quarantine": {
        "enabled": true,
        "watchBrierDelta": 0.02,
        "degradeBrierDelta": 0.03,
        "quarantineBrierDelta": 0.05,
        "latencyP99Ms": 200,
        "exceptionRatePerMin": 0.005,
        "shadowDecisionsForReentry": 500,
        "latencyDegradeMultiplier": 2.0
      }
    },
    "online": {
      "metaLearning": {
        "enabled": true,
        "maxWeightChangePctPer5Min": 10,
        "rollbackVarMultiplier": 2.5
      },
      "tuning": {
        "enabled": true,
        "trials": 50,
        "earlyStopNoImprove": 15
      }
    },
    "rl": {
      "advisor": {
        "enabled": true,
        "shadowMinDecisions": 1000,
        "minEdgeBps": 3,
        "explorationConfidence": 0.3,
        "confidenceOffset": 1.0,
        "confidenceScale": 2.0,
        "minConfidence": 0.1,
        "maxConfidence": 1.0
      }
    },
    "observability": {
      "enabled": true,
      "dashboards": true,
      "lineageTracking": true,
      "calibrationScoreOffset": 0.5,
      "calibrationScoreMultiplier": 2.0
    },
    "historical": {
      "trainer": {
        "enabled": true,
        "walkForwardCV": true,
        "autoPromote": true
      }
    },
    "network": {
      "retry": {
        "initialMs": 250,
        "maxMs": 4000,
        "maxAttempts": 5,
        "maxDelaySeconds": 30
      },
      "batch": {
        "defaultBatchSize": 32,
        "maxBatchSize": 128,
        "minBatchSize": 16,
        "telemetryBatchSize": 100,
        "modelInferenceBatchSize": 64
      }
    }
  },
  "TopstepX": {
    "ApiBaseUrl": "https://api.topstepx.com",
    "UserHubUrl": "https://rtc.topstepx.com/hubs/user",
    "MarketHubUrl": "https://rtc.topstepx.com/hubs/market",
    "UseSimulatedContracts": false,
    "MaxRetryAttempts": 3,
    "RetryDelaySeconds": 5,
    "ConnectionTimeoutSeconds": 30,
    "RequestTimeoutSeconds": 30,
    "EvalContractIds": {
      "ES": "0",
      "NQ": "0"
    }
  },
  "TopstepXClient": {
    "ClientType": "Real"
  },
  "CloudSync": {
    "IntervalMinutes": 15,
    "Enabled": true
  },
  "GitHub": {
    "Owner": "c-trading-bo",
    "Repository": "trading-bot-c-",
    "Token": ""
  },
  "StrategyCatalog": {
    "Folder": "config/strategies",
    "Enabled": true
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.AspNetCore.SignalR": "Error",
      "Microsoft.AspNetCore.Http": "Error",
      "System": "Warning",
      "TradingBot": "Information"
    }
  },
  "TradingLogger": {
    "LogDirectory": "",
    "BatchSize": 1000,
    "BatchFlushTimeoutMs": 100,
    "MaxFileSizeBytes": 104857600,
    "MemoryBufferSize": 10000,
    "EnableCompression": true,
    "LogRetentionDays": 30,
    "DebugLogRetentionDays": 7,
    "EnablePerformanceMetrics": true,
    "EnableCriticalAlerts": true,
    "MarketDataSamplingRate": 10,
    "MLPredictionAggregationCount": 100
  },
  "TradingReadiness": {
    "MinBarsSeen": 10,
    "MinSeededBars": 12,
    "MinLiveTicks": 2,
    "MaxHistoricalDataAgeHours": 24,
    "MarketDataTimeoutSeconds": 300,
    "EnableHistoricalSeeding": true,
    "EnableProgressiveReadiness": true,
    "SeedingContracts": ["CON.F.US.EP.Z25", "CON.F.US.ENQ.Z25"],
    "Environment": {
      "Name": "production",
      "Dev": {
        "MinBarsSeen": 5,
        "MinSeededBars": 3,
        "MinLiveTicks": 1,
        "AllowMockData": false
      },
      "Production": {
        "MinBarsSeen": 10,
        "MinSeededBars": 12,
        "MinLiveTicks": 2,
        "AllowMockData": false
      }
    }
  },
  "BacktestEnhancement": {
    "EnableMarketFriction": true,
    "SlippageConfig": {
      "BaseSlippageBps": 0.5,
      "VolatilityMultiplier": 1.2,
      "LiquidityImpact": 0.1,
      "ESSlippageBps": 0.25,
      "NQSlippageBps": 0.5
    },
    "LatencyConfig": {
      "BaseLatencyMs": 15,
      "NetworkJitterMs": 5,
      "OrderProcessingMs": 8,
      "MaxLatencyMs": 100
    },
    "CommissionConfig": {
      "ESCommission": 0.62,
      "NQCommission": 0.62,
      "RoundTurnCommission": true
    }
  },
  "ModelVersioning": {
    "EnableVersionTracking": true,
    "RequireVersionDifference": true,
    "MinWeightChangePct": 0.1,
    "ModelHashValidation": true,
    "TrainingMetadataLogging": true,
    "VersionComparisonLogging": true,
    "ModelRegistry": {
      "EnableRegistryValidation": true,
      "AutoBackupModels": true,
      "MaxVersionHistory": 50
    }
  },
  "DataFlowEnhancement": {
    "EnableSnapshotRequests": true,
    "SnapshotRequestDelay": 5000,
    "EnableContractRollover": true,
    "ContractRolloverDays": 7,
    "HealthMonitoring": {
      "EnableDataFlowMonitoring": true,
      "SilentFeedTimeoutSeconds": 60,
      "HeartbeatTimeoutSeconds": 15,
      "AutoRecoveryEnabled": true,
      "MaxRecoveryAttempts": 3,
      "RecoveryDelaySeconds": 30
    },
    "FrontMonthMapping": {
      "ES": "ESZ25",
      "NQ": "NQZ25"
    }
  },
  "WalkForwardValidation": {
    "EnableWalkForward": true,
    "ValidationWindowDays": 30,
    "TrainingWindowDays": 90,
    "StepSizeDays": 7,
    "MinValidationSamples": 1000,
    "SeedRotation": {
      "EnableSeedRotation": true,
      "SeedChangeFrequency": "Daily",
      "BaseSeed": 42,
      "MaxSeedRange": 10000
    },
    "PerformanceThresholds": {
      "MinSharpeRatio": 0.5,
      "MaxDrawdownPct": 5.0,
      "MinWinRate": 0.45
    }
  },
  "Autonomous": {
    "enabled": true,
    "tradeDuringLunch": false,
    "tradeOvernight": false,
    "tradePreMarket": false,
    "maxContractsPerTrade": 5,
    "dailyProfitTarget": 300,
    "maxDailyLoss": -1000,
    "maxDrawdown": -2000,
    "autoStrategySwitch": true,
    "dynamicPositionSizing": true,
    "continuousLearning": true,
    "profitCompounding": true
  },
  "TopStepCompliance": {
    "dailyLossLimit": -2400,
    "safeDailyLossLimit": -1000,
    "drawdownLimit": -2500,
    "safeDrawdownLimit": -2000,
    "approvedContracts": ["ES", "NQ"],
    "minimumTradingDays": 5,
    "profitTarget": 3000,
    "enableComplianceChecks": true,
    "enableAutomaticHalts": true
  },
  "DecisionPolicy": {
    "BullThreshold": 0.55,
    "BearThreshold": 0.45,
    "HysteresisBuffer": 0.01,
    "MaxDecisionsPerMinute": 5,
    "MinTimeBetweenDecisionsSeconds": 30,
    "EnablePositionBias": true,
    "MaxPositionForBias": 5
  },
  "EnhancedDecisionPolicy": {
    "BullThreshold": 0.55,
    "BearThreshold": 0.45,
    "HysteresisBuffer": 0.01,
    "MaxDecisionsPerMinute": 5,
    "MinTimeBetweenDecisionsSeconds": 30,
    "EnablePositionBias": true,
    "MaxPositionForBias": 5,
    "EnableFuturesHoursFiltering": true,
    "EnableUtcTimingOnly": true
  },
  "AutonomousTrading": {
    "EnableEnhancedDecisionPolicy": true,
    "EnableSymbolAwareExecutionGuards": true,
    "EnableDeterministicOrderLedger": true,
    "EnableRegimeStrategyMapping": true,
    "EnableTimeOfDayPerformanceGates": true,
    "EnableEnhancedKillSwitch": true,
    "EnableHotSwappableModels": true,
    "EnableMicrostructureCalibration": true
  },
  "ExecutionGuards": {
    "EnableKillSwitchIntegration": true,
    "EnableSymbolSpecificLimits": true,
    "EnableMarketSessionValidation": true,
    "MaxLatencyMs": 100,
    "MinVolumeThreshold": 1000,
    "MaxOrderBookImbalance": 0.80
  },
  "MicrostructureCalibration": {
    "EnableNightlyCalibration": true,
    "CalibrationHour": 3,
    "CalibrationWindowDays": 7,
    "MinSampleSize": 100,
    "UpdateThresholdPercentage": 5.0
  },
  "ModelHotSwap": {
    "EnableAutoSwap": true,
    "CheckIntervalMinutes": 5,
    "EnableValidation": true,
    "EnableAutoRollback": true,
    "MaxModelSizeBytes": 104857600
  },
  "Zone": {
    "Enabled": true,
    "BarTimeframeMinutes": 5,
    "EmitFeatureEveryBars": 1
  },
  "S7": {
    "Enabled": true,
    "Symbols": ["ES", "NQ"],
    "BarTimeframeMinutes": 5,
    "LookbackShortBars": 10,
    "LookbackMediumBars": 30,
    "LookbackLongBars": 60,
    "ZThresholdEntry": 2.0,
    "ZThresholdExit": 1.0,
    "CoherenceMin": 0.75,
    "CooldownBars": 5,
    "SizeTiltFactor": 1.0,
    "AtrMultiplierStop": 2.0,
    "AtrMultiplierTarget": 4.0,
    "MinAtrThreshold": 0.7,
    "EnableFeatureBus": true,
    "EnableTelemetry": true,
    "ZScoreAlignmentWeight": 0.4,
    "DirectionAlignmentWeight": 0.4,
    "TimeframeCoherenceWeight": 0.2,
    "LeaderThreshold": 1.2,
    "TimeframeCountNormalizer": 3.0,
    "MaxSizeTiltMultiplier": 2.0,
    "BaseBreadthScore": 1.0,
    "AdvanceDeclineBonus": 0.1,
    "AdvanceDeclinePenalty": 0.1,
    "NewHighsLowsBonus": 0.05,
    "MinBreadthScore": 0.5,
    "MaxBreadthScore": 1.5,
    "DispersionThreshold": 0.3,
    "AdvanceFractionMin": 0.6,
    "DispersionSizeBoostFactor": 1.5,
    "DispersionSizeBlockFactor": 0.5,
    "EnableDispersionAdjustments": true,
    "EnableAdaptiveThresholds": true,
    "AdaptiveThresholdMin": 1.5,
    "AdaptiveThresholdMax": 3.0,
    "AdaptiveSensitivity": 0.1,
    "AdaptiveLookbackPeriod": 20,
    "AdaptiveVolatilityWeight": 0.3,
    "AdaptivePerformanceWeight": 0.7,
    "EnableFusionTags": true,
    "FusionStateTagPrefix": "fusion.s7_state",
    "FusionCoherenceTag": "fusion.s7_coherence",
    "FusionDispersionTag": "fusion.s7_dispersion",
    "FusionAdaptiveTag": "fusion.s7_adaptive",
    "FailOnUnknownKeys": true,
    "FailOnMissingData": true,
    "TelemetryPrefix": "s7",
    "DefaultMinZScoreThreshold": 0.001,
    "FeaturePublishingIntervalMinutes": 5,
    "MarketDataBridge": {
      "FailOnMissingEnhancedService": true,
      "EnableReflectionFallbackTelemetry": true,
      "EnhancedServiceTypeName": "IEnhancedMarketDataFlowService",
      "MarketDataEventName": "OnMarketDataReceived",
      "TelemetryPrefix": "s7_bridge",
      "EnableConfigurationGating": true,
      "ProcessingTimeoutMs": 5000
    }
  },
  "Breadth": {
    // INTENTIONALLY DISABLED: Breadth adjustments dormant per operational decision
    // NullBreadthDataSource is wired to prevent consuming CSV stub data until real breadth feed is configured
    // To enable: set Enabled=true and configure DataSource with real market breadth subscription
    "Enabled": false,
    "AdvanceDeclineThreshold": 0.75,
    "NewHighsLowsRatio": 2.0,
    "SectorRotationWeight": 0.25,
    "BreadthLookbackBars": 20,
    "DataSource": "IndexBreadthFeed",
    "FailOnMissingData": true,
    "UsMarketStartHour": 14,
    "UsMarketEndHour": 21,
    "EuropeanMarketStartHour": 8,
    "EuropeanMarketEndHour": 13,
    "BaseAdvanceDeclineRatio": 1.0,
    "UsHoursAdvanceDeclineMultiplier": 1.2,
    "EuropeanHoursAdvanceDeclineMultiplier": 0.9,
    "OvernightHoursAdvanceDeclineMultiplier": 0.7,
    "AdvanceDeclineRatioMin": 0.1,
    "AdvanceDeclineRatioMax": 5.0,
    "MondayNewHighsLowsMultiplier": 1.1,
    "FridayNewHighsLowsMultiplier": 0.9,
    "MidWeekNewHighsLowsMultiplier": 1.0,
    "NewHighsLowsRatioMin": 0.5,
    "NewHighsLowsRatioMax": 10.0,
    "TechnologyUsHoursMultiplier": 1.2,
    "FinancialsUsHoursMultiplier": 1.1,
    "HealthcareUsHoursMultiplier": 0.9,
    "EnergyUsHoursMultiplier": 1.0,
    "FinancialsEuropeanHoursMultiplier": 1.3,
    "MaterialsEuropeanHoursMultiplier": 1.1,
    "TechnologyEuropeanHoursMultiplier": 0.8,
    "TechnologyOvernightMultiplier": 1.4,
    "CommunicationsOvernightMultiplier": 1.0,
    "ConsumerOvernightMultiplier": 0.7
  },
  "Features": {
    "Ofi": {
      "LookbackBars": 20,
      "MinDataPointsRequired": 2,
      "SafeZeroValue": 0,
      "HistoryBufferSize": 5,
      "FailOnMissingData": true,
      "TelemetryPrefix": "ofi"
    },
    "BarDispatcher": {
      "FailOnMissingBarSources": true,
      "ExpectedBarSources": [
        "BotCore.Services.TradingSystemBarConsumer",
        "BotCore.Services.BarTrackingService"
      ],
      "PrimaryBarSource": "BarPyramid",
      "EnableExplicitHolds": true,
      "TelemetryPrefix": "bar_dispatcher",
      "EnablePerformanceMonitoring": true
    }
  },
  "EnhancedLearning": {
    "Enabled": true,
    "LightIntervalMinutes": 60,
    "IntensiveIntervalMinutes": 15,
    "LookbackDaysDefault": 14,
    "LookbackDaysLight": 7,
    "LookbackDaysIntensive": 30,
    "DecisionMinBars": 20,
    "ProgressEvery": 100,
    "ParallelLevelLight": 2,
    "ParallelLevelIntensive": 4,
    "MaxRecentResults": 50,
    "JitterPercent": 0.10
  },
  "Paths": {
    "KillFile": "state/kill.txt",
    "RuntimeOverrides": "state/runtime-overrides.json",
    "BacktestRoot": "state/backtests",
    "FeaturesRoot": "datasets/features",
    "QuotesRoot": "datasets/quotes",
    "HolidayCme": "config/calendar/holiday-cme.json"
  },
  "CloudRlTrainer": {
    "Enabled": true,
    "PollIntervalMinutes": 15,
    "InstallDir": "artifacts/models",
    "TempDir": "artifacts/temp",
    "RegistryFile": "config/model-registry.json",
    "Github": {
      "Owner": "",
      "Repo": "",
      "Token": "",
      "TagPattern": "v*"
    },
    "Performance": {
      "PerformanceStore": "config/performance-store.json"
    }
  }
}